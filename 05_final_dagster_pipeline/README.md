# üöÄ –ú–æ–¥—É–ª—å 5: –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –Ω–∞ Dagster

–û—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π end-to-end —Ü–∏–∫–ª data-centric ML, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –º–æ–¥—É–ª–µ–π –≤ –µ–¥–∏–Ω—ã–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Å –ø–æ–º–æ—â—å—é `dagster`. 

–ü–∞–π–ø–ª–∞–π–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 5 –∫–ª—é—á–µ–≤—ã—Ö —à–∞–≥–æ–≤ (ops): 
1. —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, 
2. –æ—á–∏—Å—Ç–∫–∞, 
3. —Ä–∞–∑–º–µ—Ç–∫–∞ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∫–∏), 
4. –∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ 
5. –∏ –æ–±—É—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏. 

–£–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–¥–∞–Ω–Ω—ã–µ, –º–æ–¥–µ–ª–∏, –æ—Ç—á–µ—Ç—ã) –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (`./storage/`). –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Dagster UI.

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã (Dagster Job: `data_centric_job`)
| –®–∞–≥ (Op)               | üì• –í—Ö–æ–¥                         | ‚öôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ (–ª–æ–≥–∏–∫–∞ –∏–∑ –º–æ–¥—É–ª—è) | üì§ –í—ã—Ö–æ–¥ (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç)                      |
|------------------------|---------------------------------|-----------------------------------|------------------------------------------|
| `collect_data_op`      | URL—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö         | –ú–æ–¥—É–ª—å 1                          | `storage/raw/happiness_gdp_raw.csv`      |
| `clean_data_op`        | `Path` –Ω–∞ raw CSV               | –ú–æ–¥—É–ª—å 2 (best_strategy)          | `storage/clean/clean_*.csv`              |
| `label_data_op`        | `Path` –Ω–∞ clean CSV             | –ú–æ–¥—É–ª—å 3                          | `storage/labeled/final_labeled.csv`      |
| `active_learning_op`   | `Path` –Ω–∞ labeled CSV           | –ú–æ–¥—É–ª—å 4                          | `storage/models/is_happy_al.pkl`         |
| `train_model_op`       | `Path` –Ω–∞ labeled CSV           | –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö   | `storage/models/is_happy_full.pkl`       |
|                        |                                 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤/–º–µ—Ç—Ä–∏–∫         | `storage/reports/*`                      |

**–ó–∞–ø—É—Å–∫:**
```bash
# –ó–∞–ø—É—Å–∫ UI (recomment)
cd /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/data_for_ml_course
export DAGSTER_HOME=$PWD
dagster dev -f 05_final_dagster_pipeline/pipelines.py

# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ (CLI)
dagster job execute -f 05_final_dagster_pipeline/pipelines.py -j data_centric_job
```

## ‚úÖ Definition of Done
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Dagster-–ø–∞–π–ø–ª–∞–π–Ω, –≤–∫–ª—é—á–∞—é—â–∏–π 5 ops: collect ‚Üí clean ‚Üí label ‚Üí active_learning ‚Üí train
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –º–µ–∂–¥—É ops
- [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (`./storage/`) –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–µ–π
- [x] –ü–∞–π–ø–ª–∞–π–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `dagster dev` –∏ `dagster job execute`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã `resources` –∏ `config` –≤ Dagster (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω CI/CD –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω Dockerfile –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏

## üîó –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏
- ‚¨ÖÔ∏è **–ü—Ä–µ–¥—ã–¥—É—â–∏–π**: –ú–æ–¥—É–ª–∏ 1-4 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ª–æ–≥–∏–∫—É, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤ `ops`.
- ‚û°Ô∏è **–°–ª–µ–¥—É—é—â–∏–π**: –ù–µ—Ç (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç - –æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã). 